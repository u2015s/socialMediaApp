(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{207:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(56),i=n.n(s),o=n(21),l=n.n(o),d=n(129),u=n(285),j=(n(207),n(9)),b=n(274),x=n(44),p=n(3),h=n(27),f=n(280),O=n(287),g=n(293),m=n(16),v=n(19),w=n(17),y=n(8),S=n.n(y),k=n(33),I=Object(k.b)("auth/loginUser",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/auth/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(k.b)("auth/registerUser",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/auth/register",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(k.b)("auth/getProfile",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/profile/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(k.b)("auth/getUsers",Object(w.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/auth/users/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),_=Object(k.c)({name:"auth",initialState:{status:"idle",isLoggedIn:!1,user:{},profile:{},userStatus:"idle",users:[]},reducers:{setAuth:function(e,t){e.isLoggedIn=t.payload.isLoggedIn},logout:function(e,t){localStorage.clear(),e.isLoggedIn=!1,l.a.defaults.headers.common.authorization=null},setUser:function(e,t){e.user=t.payload}},extraReducers:(r={},Object(p.a)(r,I.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,I.fulfilled,(function(e,t){var n=t.payload.response,r=n.token,a=n.name,c=n.email,s=n._id;localStorage.setItem("login",JSON.stringify({token:r,email:c,_id:s,name:a,isLoggedIn:!0})),e.user.name=a,e.user.email=c,e.user._id=s,e.status="success",e.isLoggedIn=!0})),Object(p.a)(r,I.rejected,(function(e,t){e.status="failed",e.isLoggedIn=!1})),Object(p.a)(r,C.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,C.fulfilled,(function(e,t){e.status="success";var n=t.payload.response,r=n.token,a=n.name,c=n.email;localStorage.setItem("login",JSON.stringify({token:r,name:a,email:c,isLoggedIn:!0})),e.user.name=a,e.user.email=c,e.isLoggedIn=!0})),Object(p.a)(r,C.rejected,(function(e,t){e.status="failed",e.isLoggedIn=!1})),Object(p.a)(r,z.pending,(function(e,t){e.status="loading"})),Object(p.a)(r,z.fulfilled,(function(e,t){e.status="success",e.profile=t.payload.profile})),Object(p.a)(r,z.rejected,(function(e,t){e.status="failed"})),Object(p.a)(r,R.pending,(function(e,t){e.userStatus="loading"})),Object(p.a)(r,R.fulfilled,(function(e,t){e.userStatus="success",e.users=t.payload.response.users})),Object(p.a)(r,R.rejected,(function(e,t){e.userStatus="failed"})),r)}),L=_.reducer,D=_.actions,A=D.setAuth,E=D.logout,W=n(0);function F(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(m.b)(),s=Object(v.g)(),i=Object(m.c)((function(e){return e.auth})),o=i.status,l=i.isLoggedIn;return Object(a.useEffect)((function(){l&&s.push("/home")}),[l,s]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(I(n))},children:[Object(W.jsx)(f.a,{onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Email",type:"email",required:!0,name:"email"}),Object(W.jsx)(f.a,{sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Password",type:"password",required:!0,onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},name:"password"}),Object(W.jsx)(O.a,{sx:{width:"100%",margin:"1.5rem 0",padding:"12px 0",borderRadius:"28px",backgroundColor:"#00c8ff"},variant:"contained",type:"submit",children:"loading"===o?Object(W.jsx)(g.a,{size:24,sx:{color:"#FFF"}}):"Login"})]}),Object(W.jsx)(O.a,{onClick:function(){r({email:"user@mail.com",password:"user1234"}),c(I({email:"user@mail.com",password:"user1234"}))},sx:{width:"100%",margin:".5rem 0 1rem 0.5rem",padding:"12px 0",borderRadius:"28px"},variant:"outlined",color:"primary",children:"loading"===o?"Logging in...":"Login as guest"})]})}function T(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(m.b)(),s=Object(v.g)(),i=Object(m.c)((function(e){return e.auth})),o=i.status,l=i.isLoggedIn;return Object(a.useEffect)((function(){l&&s.push("/home")}),[l,s]),Object(W.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(C(n))},children:[Object(W.jsx)(f.a,{onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},name:"name",sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter full name",type:"text",required:!0}),Object(W.jsx)(f.a,{name:"handle",onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Choose an handle",type:"text",required:!0}),Object(W.jsx)(f.a,{name:"email",onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Email",type:"email",required:!0}),Object(W.jsx)(f.a,{name:"password",onChange:function(e){return r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.name,e.target.value))}))},sx:{width:"100%",margin:"1rem 0",bgcolor:"#fff"},variant:"outlined",label:"Enter Password",type:"password",required:!0}),Object(W.jsx)(O.a,{type:"submit",sx:{width:"100%",margin:"1.5rem 0",padding:"12px 0",borderRadius:"28px",backgroundColor:"#00c8ff"},variant:"contained",children:"loading"===o?Object(W.jsx)(g.a,{size:24,sx:{color:"#FFF"}}):"Register"})]})}var B=n(24),P=n(95);function M(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],r=(t[1],Object(x.a)());return Object(W.jsx)(b.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:{width:"100vw",height:"100vh",backgroundColor:"#00c8ff"},children:Object(W.jsxs)(b.a,{borderRadius:r.shape.borderRadius,sx:{width:r.breakpoints.values.sm,bgcolor:"#FFFFFF",padding:" 3rem 2rem"},children:[Object(W.jsx)(b.a,{textAlign:"center",marginBottom:"1rem",children:Object(W.jsx)("img",{src:"/logo.png",alt:"Logo"})}),n?Object(W.jsx)(P.a,{variant:"h5",children:"Login to your account"}):Object(W.jsx)(P.a,{variant:"h5",children:"Create a new account"}),n?Object(W.jsx)(F,{}):Object(W.jsx)(T,{}),n?Object(W.jsxs)(b.a,{textAlign:"center",margin:".5rem 0",children:["Don't have an account?"," ",Object(W.jsx)(B.b,{to:"/register",children:"Create one"})]}):Object(W.jsxs)(b.a,{textAlign:"center",margin:".5rem 0",children:["Already registered?"," ",Object(W.jsx)(B.b,{to:"/login",children:"Sign in"})]})]})})}function U(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=(t[0],t[1],Object(x.a)());return Object(W.jsx)(b.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:{width:"100vw",height:"100vh",backgroundColor:"#00c8ff"},children:Object(W.jsxs)(b.a,{borderRadius:n.shape.borderRadius,sx:{width:n.breakpoints.values.sm,bgcolor:"#FFFFFF",padding:" 3rem 2rem"},children:[Object(W.jsx)(b.a,{textAlign:"center",marginBottom:"1rem",children:Object(W.jsx)("img",{src:"/logo.png",alt:"Logo"})}),Object(W.jsx)(P.a,{variant:"h5",children:"Create a new account"}),Object(W.jsx)(T,{}),Object(W.jsxs)(b.a,{textAlign:"center",margin:".5rem 0",children:["Already registered?"," ",Object(W.jsx)(B.b,{to:"/login",children:"Sign in"})]})]})})}var J,N=n(292),G=n(284),q=n(277),Y=n(278),H=n(155),X=n.n(H),V=n(283),$=n(295),K=n(168),Q=n(288),Z=n(289),ee=n(290),te=n(107),ne=n.n(te),re=n(156),ae=n.n(re),ce=n(51),se=n.n(ce),ie=n(157),oe=n.n(ie),le=n(294),de=n(297),ue=n(296),je=n(275),be=n(153),xe=n.n(be),pe=n(68),he=n(276);function fe(e){var t=e.children,n=e.open,r=e.handleClose,a=e.handleSave,c=e.saveText,s=e.len,i=Object(pe.a)();return Object(W.jsxs)(le.a,{open:n,onClose:r,fullWidth:!0,maxWidth:"sm",children:[Object(W.jsx)(je.a,{children:Object(W.jsx)(he.a,{textAlign:"right",borderBottom:"1px solid #ccc",children:Object(W.jsx)($.a,{onClick:r,children:Object(W.jsx)(xe.a,{})})})}),Object(W.jsx)(ue.a,{children:t}),Object(W.jsx)(de.a,{children:Object(W.jsx)(O.a,{disabled:0===s,variant:"contained",color:"primary",size:"small",sx:{borderRadius:i.shape.borderRadius,fontSize:"12px"},onClick:function(){a(),r()},children:c})})]})}var Oe=Object(k.b)("post/getPosts",Object(w.a)(S.a.mark((function e(){var t,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/posts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))),ge=Object(k.b)("post/getPostDetails",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/posts/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),me=Object(k.b)("post/getComments",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/comments/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ve=Object(k.c)({name:"post",initialState:{status:"idle",posts:[],postDetails:{},commentStatus:"idle",comments:[]},reducers:{updateLike:function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.payload.id}));e.posts[n].isLiked=!e.posts[n].isLiked}},extraReducers:(J={},Object(p.a)(J,Oe.pending,(function(e,t){e.status="loading"})),Object(p.a)(J,Oe.fulfilled,(function(e,t){e.status="success",e.posts=t.payload.response.posts})),Object(p.a)(J,Oe.rejected,(function(e,t){e.status="failed"})),Object(p.a)(J,ge.pending,(function(e,t){e.status="loading"})),Object(p.a)(J,ge.fulfilled,(function(e,t){e.status="success",e.postDetails=t.payload.response.post})),Object(p.a)(J,ge.rejected,(function(e,t){e.status="failed"})),Object(p.a)(J,me.pending,(function(e,t){e.commentStatus="loading"})),Object(p.a)(J,me.fulfilled,(function(e,t){e.commentStatus="success",e.comments=t.payload.response.comments})),Object(p.a)(J,me.rejected,(function(e,t){e.commentStatus="failed"})),J)}),we=ve.reducer,ye=ve.actions.updateLike,Se=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/posts",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/comments/"+t.id,t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/posts/likes",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.delete("/api/posts/".concat(t.id));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/followers",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/followings",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("/api/followings/delete",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("/api/profile/"+t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),alert("Something went wrong.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function De(){var e=Object(x.a)(),t=Object(m.b)(),n=JSON.parse(localStorage.getItem("login"))._id,r=a.useState(null),c=Object(j.a)(r,2),s=c[0],i=c[1],o=Boolean(s),l=function(){i(null)},d=a.useState(!1),u=Object(j.a)(d,2),p=u[0],h=u[1],f=function(){h(!0)},g=a.useState(""),v=Object(j.a)(g,2),y=v[0],k=v[1],I=function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se({text:y});case 2:e.sent&&(t(Oe()),k(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(b.a,{sx:{height:"100vh",maxWidth:"100%"},children:[Object(W.jsx)(b.a,{textAlign:"center",sx:{marginTop:"3%"},children:Object(W.jsx)(B.c,{to:"/home",style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(W.jsx)("img",{src:"/logo512.png",alt:"logo",width:"80px"})})}),Object(W.jsxs)(N.a,{children:[Object(W.jsx)(B.c,{to:"/home",style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(W.jsxs)(G.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(W.jsx)(q.a,{children:Object(W.jsx)(X.a,{fontSize:"medium",color:"action"})}),Object(W.jsx)(V.a,{lgDown:!0,children:Object(W.jsx)(Y.a,{primaryTypographyProps:{fontSize:"18px",color:e.palette.action.active},primary:"Home"})})]})}),Object(W.jsx)(B.c,{to:"/messages",style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(W.jsxs)(G.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(W.jsx)(q.a,{children:Object(W.jsx)(ne.a,{fontSize:"medium",color:"action"})}),Object(W.jsx)(V.a,{lgDown:!0,children:Object(W.jsx)(Y.a,{primaryTypographyProps:{fontSize:"18px",color:e.palette.action.active},primary:"Messages"})})]})}),Object(W.jsx)(B.c,{to:"/profile/".concat(n),style:{textDecoration:"none",color:"inherit",backgroundColor:"inherit"},children:Object(W.jsxs)(G.a,{button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(W.jsx)(q.a,{children:Object(W.jsx)(ae.a,{fontSize:"medium",color:"action"})}),Object(W.jsx)(V.a,{lgDown:!0,children:Object(W.jsx)(Y.a,{primaryTypographyProps:{fontSize:"18px",color:e.palette.action.active},primary:"Profile"})})]})}),Object(W.jsxs)(G.a,{id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":o?"true":void 0,onClick:function(e){i(e.currentTarget)},button:!0,sx:{borderRadius:"28px",margin:".5rem 0"},children:[Object(W.jsx)(q.a,{children:Object(W.jsx)(se.a,{fontSize:"medium",color:"action"})}),Object(W.jsx)(V.a,{lgDown:!0,children:Object(W.jsx)(Y.a,{primaryTypographyProps:{fontSize:"18px",color:e.palette.action.active},primary:"More"})})]})]}),Object(W.jsx)(V.a,{lgDown:!0,children:Object(W.jsx)(O.a,{onClick:f,variant:"contained",color:"primary",fullWidth:!0,style:{borderRadius:"28px",padding:"10px",textTransform:"capitalize"},children:"Post"})}),Object(W.jsx)(V.a,{lgUp:!0,children:Object(W.jsx)($.a,{onClick:f,variant:"contained",color:"primary",style:{borderRadius:"28px",padding:"0 15px",textTransform:"capitalize",textAlign:"center"},children:Object(W.jsx)(oe.a,{})})}),Object(W.jsx)(K.a,{id:"basic-menu",anchorEl:s,open:o,onClose:l,MenuListProps:{"aria-labelledby":"basic-button"},children:Object(W.jsx)(Q.a,{onClick:function(){t(E()),l()},children:"Logout"})})]}),p&&Object(W.jsx)(fe,{open:p,handleClose:function(){h(!1)},saveText:"Post",len:y.length,handleSave:I,children:Object(W.jsx)(b.a,{children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)("img",{src:"/logo.png",alt:"logo",width:"60px"})}),Object(W.jsx)(Z.a,{item:!0,flexGrow:"1",children:Object(W.jsx)(b.a,{padding:".5rem 0",children:Object(W.jsx)(ee.a,{value:y,onChange:function(e){return k(e.target.value)},multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"What's happening?",sx:{width:"100%"}})})})]})})})]})}var Ae,Ee=n(279),We=Object(k.b)("follow/getFollowings",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/followings/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(k.b)("follow/getFollowers",function(){var e=Object(w.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("/api/followers/"+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Te=Object(k.c)({name:"follow",initialState:{followingStatus:"idle",followings:[],followerStatus:"idle",followers:[]},reducers:{},extraReducers:(Ae={},Object(p.a)(Ae,We.pending,(function(e,t){e.followingStatus="loading"})),Object(p.a)(Ae,We.fulfilled,(function(e,t){e.followingStatus="success",e.followings=t.payload.response.followings})),Object(p.a)(Ae,We.rejected,(function(e,t){e.followingStatus="failed"})),Object(p.a)(Ae,Fe.pending,(function(e,t){e.followerStatus="loading"})),Object(p.a)(Ae,Fe.fulfilled,(function(e,t){e.followerStatus="success",e.followers=t.payload.response.followers})),Object(p.a)(Ae,Fe.rejected,(function(e,t){e.followerStatus="failed"})),Ae)}).reducer;function Be(e){var t=e.user,n=Object(x.a)(),r=JSON.parse(localStorage.getItem("login"))._id,c=Object(a.useState)(!1),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(m.b)(),d=Object(m.c)((function(e){return e.follow})),u=d.followings,b=(d.followers,d.followingStatus);Object(a.useEffect)((function(){if("success"===b)for(var e=0;e<u.length;e++){u[e]._id===t._id&&o(!0)}}),[b]);var p=function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("39"),e.next=3,Re({userId:r,followingId:t._id});case 3:"following added successfully."===e.sent.message&&o(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(w.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e({userId:r,deleteId:t._id});case 2:n=e.sent,console.log(n.message),"following removed successfully."===n.message&&(l(We(r)),o(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsx)(he.a,{margin:"1rem 0",children:Object(W.jsxs)(Z.a,{container:!0,alignItems:"center",justifyContent:"space-between",children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,sx:{paddingRight:"12px"},children:Object(W.jsx)("img",{src:"/user.png",width:"50px",alt:"logo"})}),Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(Z.a,{container:!0,alignItems:"center",children:Object(W.jsxs)(Z.a,{item:!0,children:[Object(W.jsx)(P.a,{sx:{fontSize:"16px",fontWeight:"500"},children:t.name}),Object(W.jsx)(he.a,{display:"flex",alignItems:"center",children:Object(W.jsx)(P.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:"@"+t.handle})})]})})})]})}),Object(W.jsx)(Z.a,{item:!0,children:i?Object(W.jsx)(O.a,{size:"small",sx:{borderRadius:n.shape.borderRadius,textTransform:"capitalize",ml:"12px",background:"black","&:hover":{background:"#333"}},variant:"contained",onClick:function(e){h()},children:"Unfollow"}):Object(W.jsx)(O.a,{size:"small",sx:{borderRadius:n.shape.borderRadius,textTransform:"capitalize",ml:"12px",background:"black","&:hover":{background:"#333"}},variant:"contained",onClick:function(e){p()},children:"Follow"})})]})})}function Pe(){var e=c.a.useState(""),t=Object(j.a)(e,2),n=t[0],r=t[1],s=JSON.parse(localStorage.getItem("login"))._id,i=Object(m.b)(),o=Object(m.c)((function(e){return e.auth})),l=o.users,d=o.userStatus;function u(){return l.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.handle.toLowerCase().includes(n.toLowerCase())}))}return Object(a.useEffect)((function(){i(We(s))}),[]),Object(W.jsx)(he.a,{sx:{height:"100%"},children:Object(W.jsxs)(he.a,{paddingTop:"10px",children:[Object(W.jsxs)(he.a,{width:"100%",borderRadius:"28px",border:"1px solid #eee",position:"relative",sx:{background:"#eee"},children:[Object(W.jsx)(ee.a,{value:n,onChange:function(e){return r(e.target.value)},type:"text",inputProps:{style:{padding:"10px"}},disableUnderline:!0,fullWidth:!0,placeholder:"Search",startAdornment:Object(W.jsx)(Ee.a,{sx:{paddingLeft:"20px",color:"#777"}})}),0!==n.length&&Object(W.jsxs)(he.a,{width:"100%",sx:{backgroundColor:"white",border:"1px solid #eee",borderRadius:"28px",padding:"1rem 0",zIndex:"999",maxHeight:"50vh",overflowY:"scroll"},position:"absolute",children:[0!==n.length&&0===u().length&&Object(W.jsx)(P.a,{sx:{padding:"0 1rem"},children:"No users found!"}),u().map((function(e){return Object(W.jsx)(he.a,{children:Object(W.jsx)(B.b,{onClick:function(){return r("")},style:{textDecoration:"none"},to:"/profile/".concat(e._id),children:Object(W.jsxs)(Z.a,{sx:{overflow:"hidden",padding:".2rem 1rem","&:hover":{backgroundColor:"#eee"}},container:!0,alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,sx:{paddingRight:"12px"},children:Object(W.jsx)("img",{src:"/logo.png",width:"50px",alt:"logo"})}),Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(Z.a,{container:!0,alignItems:"center",children:Object(W.jsxs)(Z.a,{item:!0,children:[Object(W.jsx)(P.a,{sx:{fontSize:"16px",fontWeight:"500",color:"#000"},children:e.name}),Object(W.jsx)(he.a,{display:"flex",alignItems:"center",children:Object(W.jsx)(P.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:e.handle})})]})})})]})})},e._id)}))]})]}),Object(W.jsxs)(he.a,{sx:{background:"#eee",borderRadius:"28px",padding:"10px 20px",margin:"1rem 0"},children:[Object(W.jsx)(P.a,{variant:"h6",sx:{fontWeight:"bold"},children:"Who to follow"}),"success"===d&&l.filter((function(e){return e._id!==s})).slice(0,7).map((function(e){return Object(W.jsx)(Be,{user:e},e._id)}))]})]})})}function Me(e){var t=e.children,n=Object(pe.a)(),r=Object(m.b)();return Object(a.useEffect)((function(){r(R())}),[r]),Object(W.jsx)(b.a,{sx:{maxWidth:n.breakpoints.values.lg,margin:"0 auto"},children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,xs:1,lg:2,children:Object(W.jsx)(De,{})}),Object(W.jsx)(Z.a,{item:!0,xs:11,lg:10,children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,xs:12,lg:8,children:Object(W.jsx)(b.a,{sx:{height:"100vh",margin:"0 1rem",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc"},children:t})}),Object(W.jsx)(V.a,{lgDown:!0,children:Object(W.jsx)(Z.a,{item:!0,lg:4,sx:{height:"100vh"},children:Object(W.jsx)(Pe,{})})})]})})]})})}var Ue=n(298),Je=n(75),Ne=n.n(Je),Ge=n(158),qe=n.n(Ge),Ye=n(159),He=n.n(Ye),Xe=n(160),Ve=n.n(Xe),$e=n(121),Ke=n(84),Qe=n.n(Ke),Ze=n(85),et=n.n(Ze),tt=n(87),nt=n.n(tt),rt=n(86),at=n.n(rt),ct=n(88),st=n.n(ct);function it(e){var t=e.post,n=e.profile,r=Object(m.b)(),s=Object(a.useState)(""),i=Object(j.a)(s,2),o=i[0],l=i[1],d=c.a.useState(null),u=Object(j.a)(d,2),b=u[0],x=u[1],p=Boolean(b),h=JSON.parse(localStorage.getItem("login"))._id,f=function(){var e=Object(w.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r(ye({id:t._id})),e.next=4,Ie({id:t._id});case 4:"Post updated successfully."!==e.sent.message&&r(ye({id:t._id}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({id:t._id,text:o});case 2:e.sent&&l("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({id:t._id});case 2:e.sent&&r(n?z(t.author._id):Oe());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=c.a.useState(!1),y=Object(j.a)(v,2),k=y[0],I=y[1];return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(B.b,{to:"/posts/".concat(t._id),style:{textDecoration:"none",color:"inherit"},children:Object(W.jsx)(he.a,{padding:"1rem",sx:{"&:hover":{backgroundColor:"#eee"}},children:Object(W.jsxs)(Z.a,{container:!0,flexWrap:"nowrap",children:[Object(W.jsx)(Z.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(W.jsx)(B.b,{to:"/profile/".concat(t.author._id),children:Object(W.jsx)("img",{src:"/user.png",alt:"lgoog",width:"50px"})})}),Object(W.jsx)(Z.a,{item:!0,flexGrow:"1",children:Object(W.jsxs)(he.a,{children:[Object(W.jsxs)(Z.a,{container:!0,justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",children:[Object(W.jsxs)(Z.a,{item:!0,children:[Object(W.jsxs)(he.a,{display:"flex",children:[Object(W.jsx)(P.a,{sx:{fontSize:"16px",fontWeight:500,mr:"6px"},children:t.author.name}),Object(W.jsxs)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:["@",t.author.handle]}),Object(W.jsx)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:"."}),Object(W.jsx)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:Object($e.a)(new Date(t.createdAt))})]}),Object(W.jsx)(he.a,{children:Object(W.jsx)(P.a,{sx:{fontSize:"15px",color:"#555"},children:t.text})})]}),Object(W.jsxs)(Z.a,{item:!0,children:[t.author._id===h&&Object(W.jsx)($.a,{"aria-expanded":p?"true":void 0,onClick:function(e){e.preventDefault(),x(e.currentTarget)},children:Object(W.jsx)(se.a,{})}),Object(W.jsx)(K.a,{id:"basic-menu",anchorEl:b,open:p,onClose:function(){x(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(W.jsx)(Q.a,{onClick:function(e){e.preventDefault(),g()},children:"Delete Post"})})]})]}),Object(W.jsxs)(he.a,{display:"flex",justifyContent:"space-between",marginRight:"5rem",marginTop:".8rem",children:[Object(W.jsx)($.a,{onClick:function(e){e.preventDefault(),I(!0)},size:"small",children:Object(W.jsx)(Qe.a,{fontSize:"small"})}),Object(W.jsx)($.a,{size:"small",children:Object(W.jsx)(et.a,{fontSize:"small"})}),Object(W.jsx)($.a,{onClick:f,size:"small",children:t.isLiked?Object(W.jsx)(at.a,{fontSize:"small"}):Object(W.jsx)(nt.a,{fontSize:"small"})}),Object(W.jsx)($.a,{size:"small",children:Object(W.jsx)(st.a,{fontSize:"small"})})]})]})})]})})}),k&&Object(W.jsx)(fe,{open:k,handleClose:function(){I(!1)},saveText:"Comment",len:o.length,handleSave:O,children:Object(W.jsx)(he.a,{children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)("img",{src:"/logo.png",alt:"logo",width:"60px"})}),Object(W.jsx)(Z.a,{item:!0,flexGrow:"1",children:Object(W.jsx)(he.a,{padding:".5rem 0",children:Object(W.jsx)(ee.a,{onChange:function(e){return l(e.target.value)},value:o,multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"Post your comment",sx:{width:"100%"}})})})]})})})]})}var ot=n(77);function lt(){var e=Object(x.a)(),t=Object(v.i)().id,n=Object(m.b)(),r=Object(m.c)((function(e){return e.auth})),c=r.profile,s=r.status,i=Object(m.c)((function(e){return e.follow})),o=i.followingStatus,l=i.followerStatus,d=i.followers,u=i.followings,j=JSON.parse(localStorage.getItem("login"))._id;Object(a.useEffect)((function(){n(z(t))}),[n,t]),Object(a.useEffect)((function(){c.userId&&(n(Fe(c.userId._id)),n(We(c.userId._id)))}),[n,c.userId]);var b=function(){var e=Object(w.a)(S.a.mark((function e(){var r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze({userId:c.userId._id,followerId:j});case 2:return r=e.sent,e.next=5,Re({followingId:c.userId._id,userId:j});case 5:a=e.sent,r&&n(Fe(t)),a&&n(We(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(he.a,{children:[Object(W.jsx)(he.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(W.jsxs)(Z.a,{container:!0,alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,sx:{mr:"10px"},children:Object(W.jsx)(B.b,{to:"/",children:Object(W.jsx)($.a,{children:Object(W.jsx)(Ne.a,{})})})}),"success"===s&&Object(W.jsxs)(Z.a,{item:!0,children:[Object(W.jsx)(P.a,{variant:"h6",children:c.userId&&c.userId&&c.userId.name}),Object(W.jsxs)(P.a,{sx:{fontSize:"12px",color:"#555"},children:[c.posts&&c.posts.length," posts"]})," "]})]})}),Object(W.jsx)(he.a,{textAlign:"center",children:"loading"===s&&Object(W.jsx)(g.a,{size:20,color:"primary"})}),"success"===s&&Object(W.jsxs)(he.a,{height:"90vh",sx:{overflowY:"scroll"},children:[Object(W.jsxs)(he.a,{position:"relative",children:[Object(W.jsx)("img",{width:"100%",src:c.backgroundImageUrl,alt:"background"}),Object(W.jsx)(he.a,{sx:{position:"absolute",top:120,left:15,background:"#eee",borderRadius:"50%"},children:Object(W.jsx)("img",{width:"150px",src:c.profileImageUrl,alt:"profile"})})]}),Object(W.jsxs)(he.a,{textAlign:"right",padding:"10px 20px",children:[Object(W.jsx)($.a,{children:Object(W.jsx)(se.a,{})}),Object(W.jsx)($.a,{children:Object(W.jsx)(ne.a,{})}),!function(){if(c.userId&&0!==u.length)return j===c.userId._id}()&&Object(W.jsx)(O.a,{onClick:b,size:"small",sx:{borderRadius:e.shape.borderRadius,textTransform:"capitalize",padding:"6px 20px",background:"black","&:hover":{background:"#333"}},variant:"contained",children:"Follow"})]}),Object(W.jsxs)(he.a,{padding:"10px 20px",children:[Object(W.jsx)(P.a,{variant:"h6",sx:{fontWeight:"500"},children:c.userId&&c.userId.name}),Object(W.jsxs)(P.a,{sx:{fontSize:"14px",color:"#555"},children:["@",c.userId&&c.userId.handle]}),Object(W.jsx)(P.a,{fontSize:"16px",color:"#333",padding:"10px 0",children:c.bio}),Object(W.jsxs)(he.a,{display:"flex",alignItems:"center",padding:"6px 0",flexWrap:"wrap",children:[Object(W.jsxs)(he.a,{display:"flex",children:[Object(W.jsx)(qe.a,{htmlColor:"#555"}),Object(W.jsx)(P.a,{sx:{ml:"6px",color:"#555"},children:c.location})]}),Object(W.jsxs)(he.a,{display:"flex",marginLeft:"1rem",children:[Object(W.jsx)(He.a,{htmlColor:"#555"}),Object(W.jsx)(Ue.a,{sx:{textDecoration:"none",marginLeft:"6px"},href:c.website||"https://github.com/u2015s",target:"_blank",children:c.website?c.website:"www"})]}),Object(W.jsxs)(he.a,{display:"flex",marginLeft:"1rem",children:[Object(W.jsx)(Ve.a,{htmlColor:"#555"}),Object(W.jsx)(P.a,{sx:{ml:"6px",color:"#555"},children:c.userId&&c.userId&&c.userId.createdAt&&Object(ot.a)(new Date(c.userId.createdAt),"MMM dd yyyy")})]})]}),Object(W.jsxs)(he.a,{display:"flex",children:[Object(W.jsxs)(P.a,{color:"#555",marginRight:"1rem",children:[Object(W.jsx)("strong",{style:{color:"black"},children:"success"===o&&0!==u.length&&u.length+" "}),"Following"]}),Object(W.jsxs)(P.a,{color:"#555",marginRight:"1rem",children:[Object(W.jsx)("strong",{style:{color:"black"},children:"success"===l&&0!==d.length&&d[0].followerId.length+" "}),"Followers"]})]})]}),Object(W.jsx)(he.a,{borderBottom:"1px solid #ccc",children:Object(W.jsx)(P.a,{display:"inline-block",variant:"caption",fontSize:"16px",marginX:"1rem",padding:"6px 0",fontWeight:"500",borderBottom:"4px solid ".concat(e.palette.primary.main),children:"Posts"})}),c.posts&&c.posts.map((function(e){return Object(W.jsx)(it,{post:e,profile:!0},e._id)}))]})]})}var dt=n(161),ut=["path"];function jt(e){var t=e.path,n=Object(dt.a)(e,ut);return Object(m.c)((function(e){return e.auth})).isLoggedIn?Object(W.jsx)(v.b,Object(h.a)({path:t},n)):Object(W.jsx)(v.a,{to:"/login"})}function bt(){var e=Object(m.b)(),t=Object(pe.a)(),n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],s=r[1],i=function(){var t=Object(w.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se({text:c});case 2:t.sent&&(e(Oe()),s(""));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(W.jsx)(he.a,{padding:"1rem 1rem 0 1rem",borderBottom:"1px solid #ccc",children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(W.jsx)("img",{src:"/user.png",alt:"lgogo",width:"50px"})}),Object(W.jsxs)(Z.a,{item:!0,flexGrow:"1",children:[Object(W.jsx)(he.a,{padding:".5rem 0",children:Object(W.jsx)(ee.a,{value:c,onChange:function(e){return s(e.target.value)},multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"What's happening?",sx:{width:"100%"}})}),Object(W.jsx)(he.a,{textAlign:"right",paddingBottom:".5rem",paddingTop:".5rem",borderTop:"1px solid #ccc",children:Object(W.jsx)(O.a,{onClick:i,disabled:0===c.length,variant:"contained",color:"primary",sx:{borderRadius:t.shape.borderRadius,fontSize:"12px"},children:"Post"})})]})]})})}function xt(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.post})),n=t.status,r=t.posts;return Object(a.useEffect)((function(){e(Oe())}),[e]),Object(W.jsxs)(he.a,{children:[Object(W.jsx)(he.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(W.jsxs)(Z.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(P.a,{variant:"h6",children:"Home"})}),Object(W.jsx)(Z.a,{item:!0})]})}),Object(W.jsxs)(he.a,{height:"92vh",sx:{overflowY:"scroll"},children:[Object(W.jsx)(bt,{}),Object(W.jsx)(he.a,{textAlign:"center",marginTop:"1rem",children:"loading"===n&&Object(W.jsx)(g.a,{size:20,color:"primary"})}),"success"===n&&r.map((function(e){return Object(W.jsx)(it,{post:e},e._id)}))]})]})}function pt(e){var t=e.item,n=e.con,r=(Object(m.b)(),Object(a.useState)("")),s=Object(j.a)(r,2),i=(s[0],s[1],c.a.useState(null)),o=Object(j.a)(i,2),l=o[0];o[1],Boolean(l),JSON.parse(localStorage.getItem("login"))._id;return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(B.b,{to:{pathname:"/messages/".concat(t._id),state:{con:n}},style:{textDecoration:"none",color:"inherit"},children:Object(W.jsx)(he.a,{padding:"1rem",sx:{"&:hover":{backgroundColor:"#eee"}},children:Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(W.jsx)(B.b,{to:"/profile/".concat(t._id),children:Object(W.jsx)("img",{src:"/user.png",alt:"lgoog",width:"50px"})})}),Object(W.jsx)(Z.a,{item:!0,flexGrow:"1",children:Object(W.jsx)(he.a,{children:Object(W.jsx)(Z.a,{container:!0,children:Object(W.jsxs)(Z.a,{container:!0,flexWrap:"nowrap",justifyContent:"space-between",children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsxs)(he.a,{sx:{display:"flex",flexDirection:"row"},children:[Object(W.jsx)(P.a,{sx:{fontSize:"16px",fontWeight:500,mr:"6px"},children:t.name}),Object(W.jsxs)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:["@",t.handle]})]})}),Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(he.a,{children:Object(W.jsx)(P.a,{sx:{fontSize:"15px",ml:"auto",color:"#555"},children:"6m"})})})]})})})})]})})})})}var ht=n(162),ft=n.n(ht);function Ot(){Object(m.b)();var e=Object(m.c)((function(e){return e.follow})),t=(e.followings,e.followers,e.followingStatus,Object(m.c)((function(e){return e.auth}))),n=(t.profile,t.status,JSON.parse(localStorage.getItem("login"))._id),r=Object(a.useState)([]),s=Object(j.a)(r,2),i=(s[0],s[1]),o=new Set,d=Object(a.useState)([]),u=Object(j.a)(d,2),b=u[0],x=u[1],p=c.a.useState(),h=Object(j.a)(p,2)[1];c.a.useCallback((function(){return h({})}),[]);function f(e){var t=e.members.find((function(e){return e!==n}));return o.has(t)?"":(o.add(t),t)}return Object(a.useEffect)((function(){var e=function(){var e=Object(w.a)(S.a.mark((function e(){var t,r,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("/api/conversations/"+n);case 3:t=e.sent,i(t.data),r=[],a=0,t.data.forEach(function(){var e=Object(w.a)(S.a.mark((function e(n){var c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(c=f(n))){e.next=7;break}return e.next=4,Le(c);case 4:(s=e.sent).profile.conversation=n,r.push(s.profile);case 7:++a===t.data.length&&x((function(e){return ft.a.cloneDeep(r)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(a.useEffect)((function(){var e=function(){var e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("/conversations/"+n);case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(W.jsxs)(he.a,{children:[Object(W.jsx)(he.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(W.jsxs)(Z.a,{container:!0,justifyContent:"space-between",alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(P.a,{variant:"h6",children:"Messages"})}),Object(W.jsx)(Z.a,{item:!0})]})}),Object(W.jsx)(he.a,{height:"92vh",sx:{overflowY:"scroll"},children:b.length>0?Object(W.jsx)(W.Fragment,{children:b.map((function(e,t){return Object(W.jsx)(pt,{item:e.userId,con:e.conversation},t)}))}):Object(W.jsx)(he.a,{textAlign:"center",children:Object(W.jsx)(g.a,{size:20,color:"primary"})})})]})}function gt(e){var t=new Date(Date.parse(e)),n=new Date;mt.ie&&(t=Date.parse(e.replace(/( \+)/," UTC$1")));var r=Math.floor((n-t)/1e3);return r<=1?"just now":r<20?r+" seconds ago":r<40?"half a minute ago":r<60?"less than a minute ago":r<=90?"one minute ago":r<=3540?Math.round(r/60)+" minutes ago":r<=5400?"1 hour ago":r<=86400?Math.round(r/3600)+" hours ago":r<=129600?"1 day ago":r<604800?Math.round(r/86400)+" days ago":r<=777600?"1 week ago":"on "+t}var mt={ie:navigator.userAgent.match(/MSIE\s([^;]*)/)};function vt(e){var t=e.comment;return Object(W.jsx)(he.a,{padding:"1rem",sx:{"&:hover":{backgroundColor:"#eee"}},children:Object(W.jsxs)(Z.a,{container:!0,flexWrap:"nowrap",children:[Object(W.jsx)(Z.a,{item:!0,sx:{paddingRight:"1rem"},children:Object(W.jsx)("img",{src:"/logo.png",alt:"lgoog",width:"50px"})}),Object(W.jsx)(Z.a,{item:!0,flexGrow:"1",children:Object(W.jsx)(he.a,{children:Object(W.jsxs)(Z.a,{container:!0,justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",children:[Object(W.jsxs)(Z.a,{item:!0,children:[Object(W.jsxs)(he.a,{display:"flex",children:[Object(W.jsx)(P.a,{sx:{fontSize:"16px",fontWeight:500,mr:"6px"},children:t.author.name}),Object(W.jsxs)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:["@",t.author.handle]}),Object(W.jsx)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:"."}),Object(W.jsx)(P.a,{sx:{fontSize:"15px",mr:"6px",color:"#555"},children:gt(t.createdAt)})]}),Object(W.jsx)(he.a,{children:Object(W.jsx)(P.a,{sx:{fontSize:"15px",color:"#555"},children:t.text})})]}),Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)($.a,{children:Object(W.jsx)(se.a,{})})})]})})})]})})}function wt(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(x.a)(),i=Object(v.i)().id,o=Object(v.g)(),l=Object(m.b)(),d=Object(m.c)((function(e){return e.post})),u=d.status,b=d.comments,p=d.commentStatus,h=d.postDetails,f=c.a.useState(null),y=Object(j.a)(f,2),k=y[0],I=y[1],C=Boolean(k),z=JSON.parse(localStorage.getItem("login"))._id,R=function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce({id:h._id});case 2:e.sent&&o.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Ie({id:h._id});case 3:e.sent&&(l(ge(i)),l(me(i)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){l(ge(i)),l(me(i))}),[l,i]);var L=function(){var e=Object(w.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({id:i,text:n});case 2:e.sent&&(l(me(i)),r(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(he.a,{children:[Object(W.jsx)(he.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(W.jsxs)(Z.a,{container:!0,alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,sx:{mr:"10px"},children:Object(W.jsx)($.a,{onClick:function(){return o.goBack()},children:Object(W.jsx)(Ne.a,{})})}),Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(P.a,{variant:"h6",children:"Post"})})]})}),Object(W.jsxs)(he.a,{height:"92vh",sx:{overflowY:"scroll"},children:[Object(W.jsx)(he.a,{textAlign:"center",marginTop:"1rem",children:"loading"===u&&Object(W.jsx)(g.a,{size:20,color:"primary"})}),"success"===u&&Object(W.jsxs)(he.a,{padding:"0 20px",children:[Object(W.jsx)(he.a,{children:Object(W.jsxs)(Z.a,{container:!0,alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)("img",{src:"/logo.png",alt:"lgogo",width:"60px"})}),Object(W.jsx)(Z.a,{item:!0,flexGrow:"1",children:Object(W.jsxs)(Z.a,{container:!0,justifyContent:"space-between",children:[Object(W.jsxs)(Z.a,{item:!0,children:[Object(W.jsx)(P.a,{sx:{fontSize:"16px",fontWeight:"500"},children:h.author&&h.author.name}),Object(W.jsxs)(P.a,{sx:{fontSize:"15px",color:"#555"},children:["@",h.author&&h.author.handle]})]}),Object(W.jsxs)(Z.a,{item:!0,children:["success"===u&&h.author&&z===h.author._id&&Object(W.jsx)($.a,{"aria-expanded":C?"true":void 0,onClick:function(e){e.preventDefault(),I(e.currentTarget)},children:Object(W.jsx)(se.a,{})}),Object(W.jsx)(K.a,{id:"basic-menu",anchorEl:k,open:C,onClose:function(){I(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:Object(W.jsx)(Q.a,{onClick:function(e){e.preventDefault(),R()},children:"Delete Post"})})]})]})})]})}),Object(W.jsx)(he.a,{children:Object(W.jsx)(P.a,{sx:{fontSize:"20px"},children:h.text})}),Object(W.jsxs)(he.a,{display:"flex",padding:"1rem 0",borderBottom:"1px solid #ccc",children:[Object(W.jsx)(P.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:h&&h.createdAt&&Object(ot.a)(new Date(h.createdAt),"HH:mm a")}),Object(W.jsx)(P.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:"."}),Object(W.jsx)(P.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:h&&h.createdAt&&Object(ot.a)(new Date(h.createdAt),"MMM dd yyyy")})]}),Object(W.jsx)(he.a,{display:"flex",padding:"1rem 0",borderBottom:"1px solid #ccc",children:Object(W.jsxs)(P.a,{sx:{fontSize:"14px",mr:"6px",color:"#555"},children:[Object(W.jsx)("strong",{children:h.likes&&h.likes.length})," ","Likes"]})}),Object(W.jsxs)(he.a,{display:"flex",justifyContent:"space-around",padding:".5rem 0",borderBottom:"1px solid #ccc",children:[Object(W.jsx)($.a,{size:"small",children:Object(W.jsx)(Qe.a,{fontSize:"small"})}),Object(W.jsx)($.a,{size:"small",children:Object(W.jsx)(et.a,{fontSize:"small"})}),Object(W.jsx)($.a,{onClick:_,size:"small",children:h.isLiked?Object(W.jsx)(at.a,{fontSize:"small"}):Object(W.jsx)(nt.a,{fontSize:"small"})}),Object(W.jsx)($.a,{size:"small",children:Object(W.jsx)(st.a,{fontSize:"small"})})]}),Object(W.jsxs)(he.a,{children:[Object(W.jsxs)(Z.a,{container:!0,children:[Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)("img",{src:"/logo.png",alt:"logo",width:"60px"})}),Object(W.jsxs)(Z.a,{item:!0,flexGrow:"1",children:[Object(W.jsx)(he.a,{padding:".5rem 0",children:Object(W.jsx)(ee.a,{onChange:function(e){return r(e.target.value)},value:n,multiline:!0,rows:"2",disableUnderline:!0,type:"text",placeholder:"Post your comment",sx:{width:"100%"}})}),Object(W.jsx)(he.a,{textAlign:"right",paddingBottom:".5rem",children:Object(W.jsx)(O.a,{disabled:0===n.length,onClick:L,variant:"contained",color:"primary",size:"small",sx:{borderRadius:s.shape.borderRadius,fontSize:"12px"},children:"Comment"})})]})]}),Object(W.jsx)(he.a,{textAlign:"center",marginTop:"1rem",children:"loading"===p&&Object(W.jsx)(g.a,{size:20,color:"primary"})}),"success"===p&&b.map((function(e){return Object(W.jsx)(vt,{comment:e},e._id)}))]})]})]})]})}var yt=n(20),St=n(166),kt=n.n(St),It=function(e){var t=e._id,n=(e.type,e.msg),r=e.senderId;return Object(W.jsx)(W.Fragment,{children:t===r?Object(W.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"end"},children:Object(W.jsx)(P.a,{sx:{clear:"both",padding:"10px",boxSizing:"border-box",wordWrap:"break-word",marginTop:"10px",backgroundColor:"#3288cd",color:"white",minWidth:"200px",maxWidth:"400px",borderRadius:"10px"},children:n})}):Object(W.jsx)("div",{style:{display:"flex",flexDirection:"row",maxWidth:"50%"},children:Object(W.jsx)(P.a,{sx:{clear:"both",padding:"10px",boxSizing:"border-box",wordWrap:"break-word",marginTop:"10px",backgroundColor:"#444ebb",color:"white",minWidth:"200px",maxWidth:"400px",borderRadius:"10px"},children:n})})})},Ct=n(167);function zt(){var e=Object(v.h)().state.con,t=Object(a.useState)(e),n=Object(j.a)(t,2),r=n[0],c=(n[1],Object(a.useState)([])),s=Object(j.a)(c,2),i=s[0],o=s[1],d=Object(a.useState)(""),u=Object(j.a)(d,2),b=u[0],p=u[1],h=Object(a.useState)(null),g=Object(j.a)(h,2),y=g[0],k=g[1],I=(Object(x.a)(),Object(v.i)().id,Object(v.g)()),C=Object(a.useRef)(),z=Object(a.useRef)(),R=(Object(m.b)(),JSON.parse(localStorage.getItem("login"))._id);Object(a.useEffect)((function(){C.current=Object(Ct.a)(l.a.defaults.baseURL),C.current.on("getMessage",(function(e){console.log(e),k({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[y]),Object(a.useEffect)((function(){y&&(null===r||void 0===r?void 0:r.members.includes(y.sender))&&o((function(e){return[].concat(Object(yt.a)(e),[y])}))}),[y,r]),Object(a.useEffect)((function(){C.current.emit("addUser",R),C.current.on("getUsers",(function(e){}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("/api/messages/"+(null===r||void 0===r?void 0:r._id));case 3:t=e.sent,console.log(t.data),o(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[r]);var _=function(){var e=Object(w.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={sender:R,text:b,conversationId:r._id},n=r.members.find((function(e){return e!==R})),console.log(R,n,b),C.current.emit("sendMessage",{senderId:R,receiverId:n,text:b}),e.prev=4,e.next=7,l.a.post("/api/messages",t);case 7:a=e.sent,o([].concat(Object(yt.a)(i),[a.data])),p(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e;null===(e=z.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[i]),Object(W.jsxs)(he.a,{children:[Object(W.jsx)(he.a,{borderBottom:"1px solid #ccc",padding:"8px 20px",children:Object(W.jsxs)(Z.a,{container:!0,alignItems:"center",children:[Object(W.jsx)(Z.a,{item:!0,sx:{mr:"10px"},children:Object(W.jsx)($.a,{onClick:function(){return I.goBack()},children:Object(W.jsx)(Ne.a,{})})}),Object(W.jsx)(Z.a,{item:!0,children:Object(W.jsx)(P.a,{variant:"h6",children:"Message"})})]})}),Object(W.jsxs)(he.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"90vh"},children:[Object(W.jsx)(he.a,{sx:{display:"flex",flexDirection:"column",padding:"1% 3% 0 3%",flex:1,overflowX:"hidden",overflowY:"auto"},children:i.map((function(e,t){return Object(W.jsx)("div",{ref:z,children:Object(W.jsx)(It,{_id:R,type:t,msg:e.text,senderId:e.sender},t)})}))}),Object(W.jsxs)(he.a,{sx:{paddingLeft:"1%",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(W.jsx)(f.a,{id:"outlined-multiline-flexible",multiline:!0,maxRows:3,onChange:function(e){return p(e.target.value)},value:b,sx:{backgroundColor:"white",width:"80%"}}),Object(W.jsx)(O.a,{variant:"contained",size:"medium",onClick:function(){_()},sx:{marginLeft:"1%"},endIcon:Object(W.jsx)(kt.a,{}),children:"Send"})]})]})]})}var Rt=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.auth})).isLoggedIn;return Object(a.useEffect)((function(){if("login"in localStorage){var e=JSON.parse(localStorage.getItem("login"));l.a.defaults.headers.common.authorization="Bearer ".concat(e.token)}}),[t]),Object(a.useEffect)((function(){var t=(JSON.parse(localStorage.getItem("login"))||{}).isLoggedIn;t&&e(A({isLoggedIn:t}))}),[e,t]),Object(W.jsxs)(v.d,{children:[Object(W.jsx)(jt,{exact:!0,path:"/profile/:id",children:Object(W.jsx)(Me,{children:Object(W.jsx)(lt,{})})}),Object(W.jsx)(jt,{exact:!0,path:"/posts/:id",children:Object(W.jsx)(Me,{children:Object(W.jsx)(wt,{})})}),Object(W.jsx)(jt,{exact:!0,path:"/home",children:Object(W.jsx)(Me,{children:Object(W.jsx)(xt,{})})}),Object(W.jsx)(jt,{exact:!0,path:"/messages",children:Object(W.jsx)(Me,{children:Object(W.jsx)(Ot,{})})}),Object(W.jsx)(jt,{exact:!0,path:"/messages/:id",children:Object(W.jsx)(Me,{children:Object(W.jsx)(zt,{})})}),Object(W.jsx)(v.b,{exact:!0,path:"/",children:Object(W.jsx)(M,{})}),Object(W.jsx)(v.b,{exact:!0,path:"/login",children:Object(W.jsx)(M,{})}),Object(W.jsx)(v.b,{exact:!0,path:"/register",children:Object(W.jsx)(U,{})})]})},_t=Object(k.a)({reducer:{auth:L,post:we,follow:Te}}),Lt=Object(d.a)({});l.a.defaults.baseURL="https://smappp.herokuapp.com/",i.a.render(Object(W.jsx)(c.a.StrictMode,{children:Object(W.jsx)(m.a,{store:_t,children:Object(W.jsx)(B.a,{children:Object(W.jsx)(u.a,{theme:Lt,children:Object(W.jsx)(Rt,{})})})})}),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.e9e5b211.chunk.js.map